{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\n\n// ðŸ›ï¸ Initial state of the cart\nconst initialState = {\n  items: {},\n  // each item will be stored as { productId: { product, quantity } }\n  totalQuantity: 0,\n  // total items in the cart\n  totalPrice: 0 // total cost of all items\n};\n\n// â™»ï¸ Function to recalculate total quantity and price after each update\nconst recalcTotals = state => {\n  let totalQty = 0;\n  let totalCost = 0;\n\n  // Loop through all cart items to calculate totals\n  Object.values(state.items).forEach(({\n    product,\n    quantity\n  }) => {\n    totalQty += quantity;\n    totalCost += product.price * quantity;\n  });\n  state.totalQuantity = totalQty;\n  state.totalPrice = Number(totalCost.toFixed(2)); // rounded to 2 decimals\n};\n\n// ðŸ§  Slice defines reducers (actions that modify cart state)\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    // âž• Add a product to the cart\n    addToCart: (state, action) => {\n      const product = action.payload;\n      if (!state.items[product.id]) {\n        state.items[product.id] = {\n          product,\n          quantity: 1\n        };\n      }\n      recalcTotals(state);\n    },\n    // â¬†ï¸ Increase item quantity\n    increase: (state, action) => {\n      const id = action.payload;\n      if (state.items[id]) {\n        state.items[id].quantity += 1;\n      }\n      recalcTotals(state);\n    },\n    // â¬‡ï¸ Decrease item quantity (remove if quantity = 0)\n    decrease: (state, action) => {\n      const id = action.payload;\n      if (!state.items[id]) return;\n      state.items[id].quantity -= 1;\n      if (state.items[id].quantity <= 0) {\n        delete state.items[id];\n      }\n      recalcTotals(state);\n    },\n    // âŒ Remove an item completely\n    removeItem: (state, action) => {\n      const id = action.payload;\n      delete state.items[id];\n      recalcTotals(state);\n    },\n    // ðŸ§¹ Clear entire cart\n    clearCart: state => {\n      state.items = {};\n      state.totalQuantity = 0;\n      state.totalPrice = 0;\n    }\n  }\n});\n\n// Export actions and reducer\nexport const {\n  addToCart,\n  increase,\n  decrease,\n  removeItem,\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","items","totalQuantity","totalPrice","recalcTotals","state","totalQty","totalCost","Object","values","forEach","product","quantity","price","Number","toFixed","cartSlice","name","reducers","addToCart","action","payload","id","increase","decrease","removeItem","clearCart","actions","reducer"],"sources":["C:/Users/SARVESH/green-leaf-houseplants/src/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n\r\n// ðŸ›ï¸ Initial state of the cart\r\nconst initialState = {\r\n  items: {}, // each item will be stored as { productId: { product, quantity } }\r\n  totalQuantity: 0, // total items in the cart\r\n  totalPrice: 0, // total cost of all items\r\n};\r\n\r\n// â™»ï¸ Function to recalculate total quantity and price after each update\r\nconst recalcTotals = (state) => {\r\n  let totalQty = 0;\r\n  let totalCost = 0;\r\n\r\n  // Loop through all cart items to calculate totals\r\n  Object.values(state.items).forEach(({ product, quantity }) => {\r\n    totalQty += quantity;\r\n    totalCost += product.price * quantity;\r\n  });\r\n\r\n  state.totalQuantity = totalQty;\r\n  state.totalPrice = Number(totalCost.toFixed(2)); // rounded to 2 decimals\r\n};\r\n\r\n// ðŸ§  Slice defines reducers (actions that modify cart state)\r\nconst cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    // âž• Add a product to the cart\r\n    addToCart: (state, action) => {\r\n      const product = action.payload;\r\n      if (!state.items[product.id]) {\r\n        state.items[product.id] = { product, quantity: 1 };\r\n      }\r\n      recalcTotals(state);\r\n    },\r\n\r\n    // â¬†ï¸ Increase item quantity\r\n    increase: (state, action) => {\r\n      const id = action.payload;\r\n      if (state.items[id]) {\r\n        state.items[id].quantity += 1;\r\n      }\r\n      recalcTotals(state);\r\n    },\r\n\r\n    // â¬‡ï¸ Decrease item quantity (remove if quantity = 0)\r\n    decrease: (state, action) => {\r\n      const id = action.payload;\r\n      if (!state.items[id]) return;\r\n\r\n      state.items[id].quantity -= 1;\r\n      if (state.items[id].quantity <= 0) {\r\n        delete state.items[id];\r\n      }\r\n      recalcTotals(state);\r\n    },\r\n\r\n    // âŒ Remove an item completely\r\n    removeItem: (state, action) => {\r\n      const id = action.payload;\r\n      delete state.items[id];\r\n      recalcTotals(state);\r\n    },\r\n\r\n    // ðŸ§¹ Clear entire cart\r\n    clearCart: (state) => {\r\n      state.items = {};\r\n      state.totalQuantity = 0;\r\n      state.totalPrice = 0;\r\n    },\r\n  },\r\n});\r\n\r\n// Export actions and reducer\r\nexport const { addToCart, increase, decrease, removeItem, clearCart } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}